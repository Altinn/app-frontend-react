{
  "$id": "https://altinncdn.no/schemas/json/layout/footer.schema.v1.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Altinn footer",
  "description": "Schema that describes the footer configuration for Altinn applications.",
  "type": "object",
  "additionalProperties": true,
  "properties": {
    "columns": {
      "title": "Number of columns",
      "description": "Number of columns in the grid layout",
      "type": "object",
      "$ref": "#/definitions/columnProps"
    }
  },
  "if": {"required": ["columns"]},
  "then": {"$ref": "#/definitions/footer-with-grid"},
  "else": {"$ref": "#/definitions/footer-without-grid"},
  "definitions": {
    "footer-with-grid": {
      "properties": {
        "footer": {
          "title": "The footer",
          "description": "Array of components to be presented in the footer.",
          "type": "array",
          "items": {
            "allOf": [
              {"$ref": "#/definitions/footerLayout"},
              {"$ref": "#/definitions/gridLayout"}
            ]
          }
        }
      }
    },
    "footer-without-grid": {
      "properties": {
        "footer": {
          "title": "The footer",
          "description": "Array of components to be presented in the footer.",
          "type": "array",
          "items": {
            "allOf": [
              {"$ref": "#/definitions/footerLayout"},
              {"properties": {"gridColumns": false, "gridRows": false}}
            ]
          }
        }
      }
    },
    "footerLayout": {
      "properties": {
        "type": {
          "type": "string",
          "title": "Type",
          "description": "The component type.",
          "enum": ["Email", "Link", "Phone", "Text"]
        }
      },
      "required": ["type"],
      "allOf": [
        { "if": {"properties": {"type": { "const": "Email"}}}, "then": { "$ref": "#/definitions/emailComponent"}},
        { "if": {"properties": {"type": { "const": "Link"}}}, "then": { "$ref": "#/definitions/linkComponent"}},
        { "if": {"properties": {"type": { "const": "Phone"}}}, "then": { "$ref": "#/definitions/phoneComponent"}},
        { "if": {"properties": {"type": { "const": "Text"}}}, "then": { "$ref": "#/definitions/textComponent"}}
      ]
    },
    "gridLayout": {
      "properties": {
        "gridColumns": {
          "title": "Grid columns",
          "description": "The columns the component should span",
          "type": "object",
          "$ref": "#/definitions/gridProps"
        },
        "gridRows": {
          "title": "Grid rows",
          "description": "The rows the component should span",
          "type": "object",
          "$ref": "#/definitions/gridProps"
        }
      }
    },
    "icon": {
      "type": "string",
      "title": "Icon",
      "description": "Icon to show next to the component.",
      "enum": ["information", "email", "phone"]
    },
    "title": {
      "type": "string",
      "title": "Title",
      "description": "The text to display."
    },
    "emailComponent": {
      "properties": {
        "title": { "$ref": "#/definitions/title" },
        "target": {
          "type": "string",
          "title": "Target",
          "description": "The email to link to."
        }
      }
    },
    "linkComponent": {
      "properties": {
        "title": { "$ref": "#/definitions/title" },
        "target": {
          "type": "string",
          "title": "Target",
          "description": "The URL to link to."
        },
        "icon": { "$ref": "#/definitions/icon" }
      }
    },
    "phoneComponent": {
      "properties": {
        "title": { "$ref": "#/definitions/title" },
        "target": {
          "type": "string",
          "title": "Target",
          "description": "The phone number to link to."
        }
      }
    },
    "textComponent": {
      "properties": {
        "title": { "$ref": "#/definitions/title" }
      }
    },
    "columnProps": {
      "properties": {
        "xs": {
          "type": "number",
          "title": "xs",
          "description": "Grid breakpoint at 0px"
        },
        "sm": {
          "type": "number",
          "title": "sm",
          "description": "Grid breakpoint at 600px"
        },
        "md": {
          "type": "number",
          "title": "md",
          "description": "Grid breakpoint at 960px"
        },
        "lg": {
          "type": "number",
          "title": "lg",
          "description": "Grid breakpoint at 1280px"
        },
        "xl": {
          "type": "number",
          "title": "xl",
          "description": "Grid breakpoint at 1920px"
        }
      }
    },
    "gridProps": {
      "properties": {
        "xs": {
          "type": "integer",
          "title": "xs",
          "description": "Grid breakpoint at 0px"
        },
        "sm": {
          "type": "integer",
          "title": "sm",
          "description": "Grid breakpoint at 600px"
        },
        "md": {
          "type": "integer",
          "title": "md",
          "description": "Grid breakpoint at 960px"
        },
        "lg": {
          "type": "integer",
          "title": "lg",
          "description": "Grid breakpoint at 1280px"
        },
        "xl": {
          "type": "integer",
          "title": "xl",
          "description": "Grid breakpoint at 1920px"
        }
      }
    },
    "gridValue": {
      "type": ["integer", "array"],
      "examples": [1, 2, [1, 2]],
      "allOf": [
        {"if": {"type": "array"}, "then": {
          "items": {
            "type": "integer",
            "minimum": 1
          },
          "minItems": 2,
          "maxItems": 2
        }},
        {"if": {"type": "integer"}, "then": {
          "minimum": 1
        }}
      ]
    }
  }
}
